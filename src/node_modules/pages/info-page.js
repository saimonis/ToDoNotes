import React, {PureComponent} from "react";
import {getItem} from "actions/aList-item";
import {connect} from "react-redux";

class InfoPage extends PureComponent{
    componentDidMount() {
        this.props.getItem(this.props.routeState.match.params.id)
    }

    render() {
        const {loading, item, error} = this.props;

        // let result = item.content.match(`/(.*)\<div\>(.*)\<\/div\>(.*)/`);
        // let resultExactly = item.content.match(`/\<div\>(.*)\<\/div\>/`);
        // if(result){
        //
        //    result = result.map((item,i)=>{
        //         if(i===0) return null;
        //         if(item===resultExactly[1]) return (<mark>{item}</mark>)
        //         return item
        //     })
        // }

        const content = (
            <>
                <div className="">{item.title}</div>
                <div className="">
                    <pre>{item.content}</pre>
                </div>
            </>
        )
        if (error) return (<h1>sorry Error</h1>);
        return (
            <>
                {loading ? "loading" : (content || "error")}
            </>
        );
    }
}

const mapStateToProps = (state) => ({...state.reList_item});
const mapDispatchToProps = (dispatch) => ({
    getItem: (id) => dispatch(getItem(id)),
});

export default connect(mapStateToProps, mapDispatchToProps)(InfoPage)